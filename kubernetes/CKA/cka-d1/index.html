<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 5.13.7"/><meta name="theme-color" content="#663399"/><style data-href="/styles.5250b878f8ec5a9f94b0.css" data-identity="gatsby-global-css">body{background-color:#f5f5f5;color:#333;font-family:Roboto,sans-serif;margin:0;padding:0}a{color:#007acc;text-decoration:none}a:hover{text-decoration:underline}h1,h2,h3,h4,h5,h6{font-family:Montserrat,sans-serif}button{font-family:Poppins,sans-serif}.markdown-body{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);font-family:Roboto,sans-serif;line-height:1.6;margin:2rem 0;padding:2rem}.markdown-body blockquote{border-left:.25em solid #dfe2e5;color:#6a737d;margin:0;padding:0 1em}.markdown-body pre{background-color:#f6f8fa;border-radius:8px;overflow:auto;padding:16px}.markdown-body code{background:rgba(27,31,35,.05);border-radius:3px;padding:.2em .4em}.markdown-body pre code{white-space:pre-wrap;word-break:break-word}.markdown-body h1,.markdown-body h2,.markdown-body h3,.markdown-body h4,.markdown-body h5,.markdown-body h6{font-weight:700;margin-bottom:1rem;margin-top:1.5rem}.markdown-body p{margin-bottom:1rem}.markdown-body a{word-wrap:break-word;overflow-wrap:break-word;word-break:break-word}</style><style data-styled="" data-styled-version="5.3.11">.fSgxj{max-width:700px;margin:0 auto;padding:0 20px;}/*!sc*/
data-styled.g1[id="Container-sc-16528bm-0"]{content:"fSgxj,"}/*!sc*/
.dolPew{background:#f0f0f0;padding:0.5rem;text-align:center;font-size:0.8rem;border-top:1px solid #ccc;font-family:'Lato',sans-serif;}/*!sc*/
data-styled.g2[id="Footer__FooterContainer-sc-z09s33-0"]{content:"dolPew,"}/*!sc*/
.ijVxnH{color:#007BFF;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
.ijVxnH:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g3[id="Footer__FooterLink-sc-z09s33-1"]{content:"ijVxnH,"}/*!sc*/
.eravZ{font-size:2.5rem;margin:0.5rem 0 0.5rem 0;}/*!sc*/
data-styled.g5[id="blog-post__PostTitle-sc-1iu9sol-0"]{content:"eravZ,"}/*!sc*/
.kXOzhE{font-size:1rem;color:#666;margin-bottom:1rem;}/*!sc*/
data-styled.g6[id="blog-post__PostDate-sc-1iu9sol-1"]{content:"kXOzhE,"}/*!sc*/
.irwwWE{display:inline-block;margin-bottom:0.5rem;padding:0.3rem 0.6rem;background-color:#6a9b86;color:white;-webkit-text-decoration:none;text-decoration:none;border-radius:3px;font-size:0.875rem;font-weight:normal;}/*!sc*/
.irwwWE:hover{background-color:#005fa3;}/*!sc*/
data-styled.g7[id="blog-post__AllPostsButton-sc-1iu9sol-2"]{content:"irwwWE,"}/*!sc*/
</style><link rel="icon" href="/favicon-32x32.png?v=b2dec66daa6289e2a332fc74ed123411" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=b2dec66daa6289e2a332fc74ed123411"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=b2dec66daa6289e2a332fc74ed123411"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,700|Montserrat:400,700|Poppins:400,700&amp;display=swap" rel="stylesheet"/><script data-goatcounter="https://sunghj1118.goatcounter.com/count" async="" src="//gc.zgo.at/count.js"></script></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="Container-sc-16528bm-0 fSgxj"><div class="markdown-body"><a class="blog-post__AllPostsButton-sc-1iu9sol-2 irwwWE" href="/">&lt; All posts</a><h1 class="blog-post__PostTitle-sc-1iu9sol-0 eravZ">CKA 시험 준비 D1</h1><p class="blog-post__PostDate-sc-1iu9sol-1 kXOzhE">November 21, 2024</p><div><h1>CKA 시험 준비 D-1</h1>
<p>내일 오전 6시에 시험인데 막판에 일이 너무 몰려서 정말 준비가 너무 부족하다. 마음 같아서는 미루고 싶지만 시험 변경이 불가능하고, 25일에 개정되는만큼 해보는데까지 해보려 한다.</p>
<p>Q. Create a new deployment called nginx-deploy, with image nginx:1.16 and 1 replica. Next upgrade the deployment to version 1.17 using rolling update.</p>
<ul>
<li>Deployment : nginx-deploy. Image: nginx:1.16</li>
<li>Image: nginx:1.16</li>
<li>Task: Upgrade the version of the deployment to 1:17</li>
<li>Task: Record the changes for the image upgrade</li>
</ul>
<p>A.</p>
<ol>
<li>Create a deployment with the image nginx:1.16 and 1 replica.</li>
</ol>
<p><code>k create deployment nginx-deploy --image=nginx:1.16 --replicas=1</code></p>
<ol start="2">
<li>Set the image to nginx:1.17.</li>
</ol>
<p><code>k set image deployment/nginx-deploy  nginx=nginx:1.17</code></p>
<p>Q. Create a new user called john. Grant him access to the cluster. John should have permission to create, list, get, update and delete pods in the development namespace . The private key exists in the location: /root/CKA/john.key and csr at /root/CKA/john.csr.</p>
<ul>
<li>Important Note: As of kubernetes 1.19, the CertificateSigningRequest object expects a signerName.</li>
<li>Please refer the documentation to see an example. The documentation tab is available at the top right of terminal.</li>
<li>CSR: john-developer Status:Approved</li>
<li>Role Name: developer, namespace: development, Resource: Pods</li>
<li>Access: User 'john' has appropriate permissions</li>
</ul>
<p>A.</p>
<ol>
<li>Create a CSR for the user john. <code>vim csr.yaml</code>
<ol>
<li>Change the crt file into base64 for the csr.yaml file. <code>cat /root/CKA/john.csr | base64 | tr -d "\n"</code></li>
<li>Create a CSR object for the user john. <code>k create -f csr.yaml</code></li>
<li>Approve the CSR for the user john. <code>k certificate approve john-developer</code></li>
</ol>
</li>
<li>Create a Role
<ol>
<li><code>kubectl create role developer --verb=create,get,list,delete --resource=pods -n development</code></li>
</ol>
</li>
<li>Create Role Binding
<ol>
<li><code>kubectl create rolebinding john-developer --role=developer --user=john -n development</code></li>
</ol>
</li>
<li>[optional] Check
<ol>
<li><code>k auth can-i get pods --namespace=development --as=john</code></li>
</ol>
</li>
</ol>
<p>Q. Create a nginx pod called nginx-resolver using image nginx, expose it internally with a service called nginx-resolver-service. Test that you are able to look up the service and pod names from within the cluster. Use the image: busybox:1.28 for dns lookup. Record results in /root/CKA/nginx.svc and /root/CKA/nginx.pod</p>
<ul>
<li>Pod: nginx-resolver created</li>
<li>Service DNS Resolution recorded correctly</li>
<li>Pod DNS resolution recorded correctly</li>
</ul>
<p>A.</p>
<ol>
<li>Create a pod called nginx-resolver using image nginx.
<ol>
<li><code>k run nginx-resolver --image=nginx</code></li>
</ol>
</li>
<li>Expose the pod internally with a service called nginx-resolver-service.
<ol>
<li><code>k expose pod nginx-resolver --name=nginx-resolver-service --port=80</code></li>
</ol>
</li>
<li>Create busybox pod for dns lookup.
<ol>
<li><code>k run busybox --image=busybox:1.28 -- sleep 4000</code></li>
</ol>
</li>
<li>Do nslookup for the service and pod names.
<ol>
<li>SVC: Enter the busybox pod to nslookup and save it to file. <code>k exec busybox -- nslookup nginx-resolver-service > /root/CKA/nginx.svc</code></li>
<li>POD:
<ol>
<li>Get ip address of the nginx-resolver pod. <code>k get pod nginx-resolver -o wide</code></li>
<li>Enter the busybox pod to nslookup and save it to file. <code>k exec busybox -- nslookup 10-244-192-1.default.pod.cluster.local > /root/CKA/nginx.pod</code></li>
</ol>
</li>
</ol>
</li>
</ol>
<p>Q. Create a static pod on node01 called nginx-critical with image nginx and make sure that it is recreated/restarted automatically in case of a failure.</p>
<ul>
<li>Use /etc/kubernetes/manifests as the Static Pod path for example.</li>
</ul>
<p>A.</p>
<ol>
<li>Get the node name. <code>k get nodes -o wide</code></li>
<li>Create a dry-run yaml file for the static pod.
<ol>
<li><code>k run nginx-critical --image=nginx --restart=Always --dry-run=client -o yaml</code></li>
</ol>
</li>
<li>Create a static pod on node01.
<ol>
<li><code>cat > /etc/kubernetes/manifests/nginx-critical.yaml</code></li>
</ol>
</li>
</ol></div></div></div><footer class="Footer__FooterContainer-sc-z09s33-0 dolPew"><p>© <!-- -->2024<!-- --> HyunJoon Sung. All Rights Reserved.</p><p><a href="https://github.com/sunghj1118" class="Footer__FooterLink-sc-z09s33-1 ijVxnH">GitHub</a></p></footer></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/kubernetes/CKA/cka-d1/";/*]]>*/</script><!-- slice-start id="_gatsby-scripts-1" -->
          <script
            id="gatsby-chunk-mapping"
          >
            window.___chunkMapping="{\"app\":[\"/app-2a748b101fc84366569c.js\"],\"component---src-pages-404-js\":[\"/component---src-pages-404-js-60d2a0d2c248384ad0d2.js\"],\"component---src-pages-index-js\":[\"/component---src-pages-index-js-593ef84ffd916dd56b25.js\"],\"component---src-pages-page-2-js\":[\"/component---src-pages-page-2-js-50e83426ef775361f1a0.js\"],\"component---src-pages-projects-js\":[\"/component---src-pages-projects-js-09d84881e2521f783e15.js\"],\"component---src-pages-using-ssr-js\":[\"/component---src-pages-using-ssr-js-f4952d7ab534af96aca0.js\"],\"component---src-pages-using-typescript-tsx\":[\"/component---src-pages-using-typescript-tsx-55e14b7949e0e0236a5b.js\"],\"component---src-templates-blog-post-js\":[\"/component---src-templates-blog-post-js-a5dcc9dbff974058c7d9.js\"],\"component---src-templates-tag-js\":[\"/component---src-templates-tag-js-84a93951c485ea92cc02.js\"]}";
          </script>
        <script>window.___webpackCompilationHash="885ecb13b1d4f4b10784";</script><script src="/webpack-runtime-a14314fed5ac8e7c9263.js" async></script><script src="/framework-a880249783d1bea64870.js" async></script><script src="/app-2a748b101fc84366569c.js" async></script><!-- slice-end id="_gatsby-scripts-1" --></body></html>