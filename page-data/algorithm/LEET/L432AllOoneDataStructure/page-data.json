{"componentChunkName":"component---src-templates-blog-post-js","path":"/algorithm/LEET/L432AllOoneDataStructure/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"432. All O`one Data Structure","date":"September 29, 2024"},"html":"<h1>문제 설명</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABSklEQVR42qWS646CMBCFef9n1B8SEBVQrr3RcpxTU4Os2Wyyk5y0kPabMzPN8jzH4XDA6ZSjaRqEELCu61cBK4x1GCYH49zXM9k4jpimCdZaODmktf6QMQZKKSzLAoaVVSmPcZyhNO/QAN6RPR4PdF0HgodhiBfp0nsf9xQTcaUDAq31AqXLRZIGOb8BXi4XFEURdT6XqKoKt9sNZVnger2ibVtJ+EpKqJKStRGQmmV18Fsagbxc13WEJBHCftL9/X6PZccQh0paQ4dW2kBg2NZLYOoTe8h96tfPgbxikrOd7tHrDtY7KKeitMh6g4wgXkjT5brXFjhohWN7RDkU6E0Hv3pxGaLilDlhOpznOYrfdMpBUEzIAb0qXuHEvVnkBTiN2U7ykHYls0ep7DRdKuyanYDf/n8AOcm+79+Ofos/A/kkWCrf4n+BT2WIXP9aF+gdAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"432\"\n        title=\"\"\n        src=\"/static/fdd92fbf20919e72ea4e0f0fe55ebc48/5a190/432.png\"\n        srcset=\"/static/fdd92fbf20919e72ea4e0f0fe55ebc48/772e8/432.png 200w,\n/static/fdd92fbf20919e72ea4e0f0fe55ebc48/e17e5/432.png 400w,\n/static/fdd92fbf20919e72ea4e0f0fe55ebc48/5a190/432.png 800w,\n/static/fdd92fbf20919e72ea4e0f0fe55ebc48/c1b63/432.png 1200w,\n/static/fdd92fbf20919e72ea4e0f0fe55ebc48/29007/432.png 1600w,\n/static/fdd92fbf20919e72ea4e0f0fe55ebc48/a30c9/432.png 2614w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>풀이 및 해설</h2>\n<p>도움 없이 바로 풀긴 했는데 너무 느리다. 조금 더 개선해보려 한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABGUlEQVR42pWSiW7DMAxD+/8/uq65fB+yY05SErTYCgw1QNiIEPqJ8u0RFtjs0VvHPgb+XwOlVjhfkUrF+PXPLacMqg37voOoobFxa01FRCo5S13Vuc7KeWAzASEUrh81NbTW4fGYsMyL7qJpmuG9x7YZGGPgnEdhmkvU5bId65Rw/3ZYVo/KUGpYSoGochuveqXq/UktytxJZUNrMlNa5EI4AYXQQiiF4tqdc9xKONtuZxSvhsSXDDhDWNdNM72iVMIYExJnmdKxhxD125Ff/6NUSQnd7HH/WhFSfA7l3RyfLfY3Qx5q2JiwxYboJTKmzk2juuHTxYbScq07og0cU2Ra0pblCX1uyO9Q3p/QF1tgloCYChOSDvcHXSXB/r/LRiUAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"test\"\n        title=\"\"\n        src=\"/static/fa29cd193c06ba7fe315614df6cd822d/5a190/test.png\"\n        srcset=\"/static/fa29cd193c06ba7fe315614df6cd822d/772e8/test.png 200w,\n/static/fa29cd193c06ba7fe315614df6cd822d/e17e5/test.png 400w,\n/static/fa29cd193c06ba7fe315614df6cd822d/5a190/test.png 800w,\n/static/fa29cd193c06ba7fe315614df6cd822d/c1b63/test.png 1200w,\n/static/fa29cd193c06ba7fe315614df6cd822d/29007/test.png 1600w,\n/static/fa29cd193c06ba7fe315614df6cd822d/0e149/test.png 2466w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>풀이 1</h2>\n<pre><code class=\"language-python\">class AllOne:\n\n    def __init__(self):\n        self.dic = {}\n\n    def inc(self, key: str) -> None:\n        if key not in self.dic.keys():\n            self.dic[key] = 1\n        else:\n            self.dic[key] += 1\n\n    def dec(self, key: str) -> None:\n        self.dic[key] -= 1\n\n        if self.dic[key] == 0:\n            del self.dic[key]\n\n    def getMaxKey(self) -> str:\n        if len(self.dic) == 0:\n            return \"\"\n        \n        return max(self.dic, key = self.dic.get)\n        \n\n    def getMinKey(self) -> str:\n        if len(self.dic) == 0:\n            return \"\"\n        \n        return min(self.dic, key = self.dic.get)\n</code></pre>\n<h2>Complexity Analysis</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLklEQVR42o1SbU7DMAzd1bkGEnfgJkj8RGgT+2qh00ob5zvxI0nXtZU2NEtPdhz7xbG9YgwirMS+q2GcRfAB3vuCGCPmYqxF83NCfW7w/PmKp/cXvJ0/yl1kxmoMzMlt20IIAWMMnHNFZz+nwBE5yTkPFzwqdcIXVSCvCkcu7koYQsB6s0ZdVxB9N+hELqUsxBnZzqRj9bdkVmHAbnPEd91iezxju9uj7/tCorUuD44tsOnbxhoEjuB7hPnl4GNK5IIcmJMz8t2jslo03EW0GpcGLwN5Dp7sfwgZykY0NBE8IjHyInZZoWccOgZZRm8GiIvu9HSeo/pNAwp8mzCvitQGpAYIqUFyssVok7r6tElrFe8QDqtBBSpNl4jKlFU6E4nikzOb0lrZNO350P4ANX4PrdpgEUAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tc\"\n        title=\"\"\n        src=\"/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/5a190/tc.png\"\n        srcset=\"/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/772e8/tc.png 200w,\n/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/e17e5/tc.png 400w,\n/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/5a190/tc.png 800w,\n/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/c1b63/tc.png 1200w,\n/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/29007/tc.png 1600w,\n/static/7b9f5bfa5bf3cae1fb41e76c643dbd63/d3d45/tc.png 1614w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>inc: O(1)</li>\n<li>dec: O(1)</li>\n<li>getMaxKey: O(n)</li>\n<li>getMinKey: O(n)</li>\n</ul>\n<p>생각해보면 풀리는게 이상하다. O(1)로 풀어야 하는데 O(n)으로 풀고 있다. 다시 생각해보자.</p>\n<h2>풀이 2</h2>\n<p>어쩐지 너무 쉽다 싶었는데, 역시 O(1)으로 맞추려면 확실히 개념도 복잡하고 구현하는것도 더 어려워진다.</p>\n<pre><code class=\"language-python\">class Node:\n    def __init__(self, key = '', count = 0):\n        self.keys = set([key]) if key else set()\n        self.count = count\n        self.prev = None\n        self.next = None\n\nclass AllOne:\n    def __init__(self):\n        self.dict = {}\n        self.head = Node()\n        self.tail = Node()\n        self.head.next = self.tail\n        self.tail.prev = self.head\n\n    def inc(self, key: str) -> None:\n        if key not in self.dict:\n            if self.head.next.count == 1:\n                node = self.head.next\n                node.keys.add(key)\n            else:\n                node = Node(key, 1)\n                self._add_after(self.head, node)\n            self.dict[key] = node\n        else:\n            node = self.dict[key]\n            next_node = node.next\n            if next_node.count != node.count + 1:\n                next_node = Node('', node.count+1)\n                self._add_after(node, next_node)\n            next_node.keys.add(key)\n            self.dict[key] = next_node\n            node.keys.remove(key)\n            if not node.keys:\n                self._remove(node)\n\n    def dec(self, key: str) -> None:\n        if key in self.dict:\n            node = self.dict[key]\n            if node.count > 1:\n                prev_node = node.prev\n                if prev_node.count != node.count - 1:\n                    prev_node = Node('', node.count - 1)\n                    self._add_after(node.prev, prev_node)\n                prev_node.keys.add(key)\n                self.dict[key] = prev_node\n            else:\n                del self.dict[key]\n            node.keys.remove(key)\n            if not node.keys:\n                self._remove(node)\n\n    def getMaxKey(self) -> str:\n        return next(iter(self.tail.prev.keys)) if self.tail.prev != self.head else \"\"\n        \n\n    def getMinKey(self) -> str:\n        return next(iter(self.head.next.keys)) if self.head.next != self.tail else \"\"\n    \n    def _add_after(self, node: Node, new_node: Node) -> None:\n        new_node.prev = node\n        new_node.next = node.next\n        node.next.prev = new_node\n        node.next = new_node\n\n    def _remove(self, node: Node) -> None:\n        node.prev.next = node.next\n        node.next.prev = node.prev\n</code></pre>\n<p>표로 정리하면 다음과 같다:\n노드로 count를 관리하고, 각 노드에는 key를 set으로 관리한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABX0lEQVR42pVS2XaEIAzl//+wPaezuCEICii4zqRJxnrqnL704XqzkJsIEaYz8Hn5gg+ENgq2bYJ5GWFBbNv8bwgXHGRVAdo2KKhBoSixxUYkfi6Y3viFdZ0OFt5bUCqHlNwODzGebcI4+l85v8MdecI09SBi9FAUF2jbGuo6Y5DdNAWU5Q2srRAS7Ss2zo5zUt75jDEVotzP1SDGMYD3DQxDC1qXKH5l3xjJdtcpFFHclOIhWBYnIbJDMAfTlILG7HsLQ2whYAEJvAoNOK/BOc1McTrX9wY6pzDf7L494nQNIiUUHPAOUkBRz5zIxhjF5zniZY+wLomxEK+J4++gnIgoWCn8PVnxaxPIz2UJ97KAznfYqEcMzDENQDX0oo/HcgKvDX1ah/dSVywkd3Hypa45di9z9olzbHjLM5w+HCKnPVxxgWnvfiajwgKnq3auG8VMIDHKZzh56D08/xD8Bnp5+x9mDU/5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"diag\"\n        title=\"\"\n        src=\"/static/883aec72bf5712243fb24e3eddccec18/5a190/nodediag.png\"\n        srcset=\"/static/883aec72bf5712243fb24e3eddccec18/772e8/nodediag.png 200w,\n/static/883aec72bf5712243fb24e3eddccec18/e17e5/nodediag.png 400w,\n/static/883aec72bf5712243fb24e3eddccec18/5a190/nodediag.png 800w,\n/static/883aec72bf5712243fb24e3eddccec18/c1b63/nodediag.png 1200w,\n/static/883aec72bf5712243fb24e3eddccec18/cf8e5/nodediag.png 1402w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2>Complexity Analysis</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAABLElEQVR42p1Sy07EMAzc3+YrOPIN/AsSRxDLBYqgtFuWbuy82mSI08c2B1YISyM7djKexNlFRIgddY/n5gXaGjhr4ZyDTX4cx1yPcdpnUq5tDqi/Wlw/3uLq/gZ33UOuhRiww2wxBFhtYIzBMAyZyHuf45BqQrhAamMYQYOG8gwX/EJzJpSDT/s96voDbdugqioQEZg5K9U6HVYqk4t6wXK7rRWEn+8duoPCa/J1XReEWVWCKJS9ol6u+CuhGGmPbxqmJ5jfbcFfrSA0PqCjqeu2d1wbbPwcXyCM0G5Eq8JK8h8rFNqk8O0YQA7ojSAWONkld66zv0Aok1Ocpkk6+xNxgs7oFef8GrN4gnW+eONSYZomM6UvwhPShGXKEhOp7GXNRPkbSc45WxD+AO07D4ljuSjkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"tco1\"\n        title=\"\"\n        src=\"/static/00019c7fb8936b3350cf02eb070b5024/5a190/O1tc.png\"\n        srcset=\"/static/00019c7fb8936b3350cf02eb070b5024/772e8/O1tc.png 200w,\n/static/00019c7fb8936b3350cf02eb070b5024/e17e5/O1tc.png 400w,\n/static/00019c7fb8936b3350cf02eb070b5024/5a190/O1tc.png 800w,\n/static/00019c7fb8936b3350cf02eb070b5024/c1b63/O1tc.png 1200w,\n/static/00019c7fb8936b3350cf02eb070b5024/29007/O1tc.png 1600w,\n/static/00019c7fb8936b3350cf02eb070b5024/7575b/O1tc.png 1608w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3>시간 복잡도</h3>\n<ul>\n<li>inc: O(1)</li>\n<li>dec: O(1)</li>\n<li>getMaxKey: O(1)</li>\n<li>getMinKey: O(1)</li>\n<li>즉, 모두 O(1)이다.</li>\n</ul>\n<h3>공간 복잡도</h3>\n<ul>\n<li>O(n)</li>\n<li>n은 key의 개수이다.</li>\n</ul>\n<h2>Constraint Analysis</h2>\n<pre><code>Constraints:\n1 &#x3C;= key.length &#x3C;= 10\nkey consists of lowercase English letters.\nIt is guaranteed that for each call to dec, key is existing in the data structure.\nAt most 5 * 104 calls will be made to inc, dec, getMaxKey, and getMinKey.\n</code></pre>\n<h1>References</h1>\n<ul>\n<li><a href=\"https://leetcode.com/problems/all-oone-data-structure/\">432. All O`one Data Structure</a></li>\n</ul>"}},"pageContext":{"slug":"/algorithm/LEET/L432AllOoneDataStructure/"}},"staticQueryHashes":[],"slicesMap":{}}