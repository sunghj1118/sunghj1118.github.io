{"componentChunkName":"component---src-templates-blog-post-js","path":"/kubernetes/2024-2study/ingress_annotations/","result":{"data":{"markdownRemark":{"frontmatter":{"title":"인그레스(Ingress): 세부 기능","date":"October 12, 2024"},"html":"<h1>인그레스의 세부 기능: annotation을 이용한 설정</h1>\n<p>인그레스에서는 주석(annotation) 항목을 정의함으로써 세부적인 설정이 가능하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 34.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAABYlAAAWJQFJUiTwAAABFUlEQVR42qWQ7U6DMBSGe/93oVFhaOLG2I/FO1DvwUXYYN0obSkfmdDX0xIjS/xnkyfPoelpzwt7e33H8jnGOk6IDVbLGDHV8SpBst7gMXpC8LBAGCwQ3IceV4e0FzgHEcIwwu3NHbbbFzDOOXa7D2RZhjRNvR1FUUBKCSEERCkmOyqBqqrIlbeHzjlrrcF0XYOfzjBNA2ut5z+LXUwNmX3CFDna0xGG57BGA62ZaGqAvm3XTB2zB38en5uNSoLnOfL9HrIsoWh0R60UJEXUZEMpRiX8Zb7Z4irN1YWDoubiAE0TGn6EPOx93dC0mva78oxBS1g6N1/zX2PxOzzruxaXvgfGERgG8pxx8vAF6+p5ZPt35G/7YA+RUAm+1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1a\"\n        title=\"\"\n        src=\"/static/c41e369fd45b8ca327c76ecaa685cde6/5a190/8.1a.png\"\n        srcset=\"/static/c41e369fd45b8ca327c76ecaa685cde6/772e8/8.1a.png 200w,\n/static/c41e369fd45b8ca327c76ecaa685cde6/e17e5/8.1a.png 400w,\n/static/c41e369fd45b8ca327c76ecaa685cde6/5a190/8.1a.png 800w,\n/static/c41e369fd45b8ca327c76ecaa685cde6/c1b63/8.1a.png 1200w,\n/static/c41e369fd45b8ca327c76ecaa685cde6/a4f81/8.1a.png 1508w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3>ingress.class</h3>\n<ul>\n<li><strong>kubernetes.io/ingress.class는 해당 인그레스 규칙을 적용할 인그레스 컨트롤러를 지정한다.</strong></li>\n<li>클러스터에서 기본적으로 사용하는 인그레스 컨트롤러가 있기 때문에 특정 인그레스 컨트롤러를 사용하고 싶을 때 이 항목을 사용한다.\n<ul>\n<li>예: GKE 클러스터에서는 GKE의 인그레스 컨트롤러를 자동으로 생성하므로, nginx라고 명시해줘야 nginx 인그레스 컨트롤러를 사용할 수 있다.</li>\n</ul>\n</li>\n</ul>\n<h3>rewrite-target</h3>\n<ul>\n<li><strong>nginx.ingress.kubernetes.io/rewrite-target는 인그레스에 정의된 경로로 들어오는 요청을 rewrite-target에 설정된 경로로 전달한다.</strong>\n<ul>\n<li>예: nginx 인그레스 컨트롤러로 /echo-hostname에 접근하면 hostname-service에는 / 경로로 전달된다.</li>\n<li>/echo-hostname/alice/bob -> /</li>\n</ul>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 20.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAYAAACOXx+WAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAm0lEQVR42k1PCQ7DMAjr/7+6ScsackESD1O1GhJXbMA54NZ7Ry0VkgtExLOg1qvPXhfHdGhkEefkHLxSiGek9PUdg6twYCMagr11jDFimJl9aw3D8TUXVPXBgqesNXhmhr250M3U8H69UeS6mM+MaTMI2wMHQzHVy6U6fVLwTnf+jjz6wbDWCgW8onQ/wLebdGP/Hmr1yjbtWfgDVlU4wmkQbEQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1b\"\n        title=\"\"\n        src=\"/static/252e2eccb08930b3c3663986692aa9e1/5a190/8.1b.png\"\n        srcset=\"/static/252e2eccb08930b3c3663986692aa9e1/772e8/8.1b.png 200w,\n/static/252e2eccb08930b3c3663986692aa9e1/e17e5/8.1b.png 400w,\n/static/252e2eccb08930b3c3663986692aa9e1/5a190/8.1b.png 800w,\n/static/252e2eccb08930b3c3663986692aa9e1/c1b63/8.1b.png 1200w,\n/static/252e2eccb08930b3c3663986692aa9e1/d0ab7/8.1b.png 1532w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 26.5%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAu0lEQVR42k1PAQ6EIAzz/y89k1MRBgIKvXVoTpNmnaNdN9VSEWPEcRyQIEjKc84IxpPNyOXVE373WNfNZvx674YphGAD5xy2jQ8Cii7hopKLmVs9Rq21Gor+55unJ67zwuS9x/JdsC5q5oMaFE2bESVazzmX7G4fXMQqA8idnPN4XzYx+vyZ1XCF2xxSSiammcg40yvnAgqe80Yd+PP7ZCakYFdzLqAhxe9ziPM8TdR6Q2sNvSlX9Ae94weKVIRxDTOMhAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1c\"\n        title=\"\"\n        src=\"/static/7692127c7d1dfbf45c37724d7da12316/5a190/8.1c.png\"\n        srcset=\"/static/7692127c7d1dfbf45c37724d7da12316/772e8/8.1c.png 200w,\n/static/7692127c7d1dfbf45c37724d7da12316/e17e5/8.1c.png 400w,\n/static/7692127c7d1dfbf45c37724d7da12316/5a190/8.1c.png 800w,\n/static/7692127c7d1dfbf45c37724d7da12316/c1b63/8.1c.png 1200w,\n/static/7692127c7d1dfbf45c37724d7da12316/7db30/8.1c.png 1494w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3>캡처 그룹</h3>\n<p>캡처 그룹이란 정규 표현식의 형태로 요청 경로 등의 값을 변수로서 사용할 수 있는 방법이다. 따라서 rewrite-target에 캡처 그룹을 사용하면 요청 경로의 일부를 변수로 사용할 수 있다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.50000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABg0lEQVR42p2S6VKDQBCEef8n0dLERC2NOXwGYy5/GFgSI+FaNhwGItDOLKmY8qcUX01Pw3YtsxijwTOG/Yb+4wDDpxH6vSEGVJmH+x46rS7a1x102rfoEq2rG9yQ12nd6tpt3+Hy4hqT1ymM8csY08mUmGFCdT5bYDF/g7m0sLLXEJaAaZrUm7BICyGoWtq3jgjbxpLelzKCEfgB4jhBWZao6xp8Hcu/LsOjwDCUSChUqR3yvKBEuqu6oW6oquqkz/2/niGFhc/5DKH5jmRta/bOBulmjWzzgXi9whf1jbZRuI5+FtG6nS0aVjaUMFHKAEbiuvAtE5JMrgG9wDqiIMlhvodChsjDgPDxrSIcoqbfB/4ZHqo0oR1KhcN3iZK2zPD4Kv5ETTPPWs/1d7An75yjZ0iaXyQl3K0Lj+CetfPpUO/Bcz3wwbmkwyDE1nG1Zj9JEhR5jkNxQFU2MzbSNEOWZfpAlFIUHulQFSkdwN6OnjEcwDWOY9KpXsN/yH6fnw7nB5kxoYul2TBWAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1d\"\n        title=\"\"\n        src=\"/static/056ee7a86f14527a1fa11fd350dfcbf7/5a190/8.1d.png\"\n        srcset=\"/static/056ee7a86f14527a1fa11fd350dfcbf7/772e8/8.1d.png 200w,\n/static/056ee7a86f14527a1fa11fd350dfcbf7/e17e5/8.1d.png 400w,\n/static/056ee7a86f14527a1fa11fd350dfcbf7/5a190/8.1d.png 800w,\n/static/056ee7a86f14527a1fa11fd350dfcbf7/c1b63/8.1d.png 1200w,\n/static/056ee7a86f14527a1fa11fd350dfcbf7/985a9/8.1d.png 1512w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.500000000000004%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAAA10lEQVR42m2Q626DMAyFef8XnParhbKOokIICYhC4m8OsGqlc3Rsy/Hl2JkfBkYFIhCj2rjZGJCwQAirv8V2/OYi+nbZnWyeJurPD/y1xF5ybHGmLwvG6gsxDdHcedQVXXFSnDH5aYUrc6J3HCUTndZ9X2nKC/2tYmzuBN9rco+MHhn8Wrj09gXBWWSeV2J/eJIl1XWW6laz6HrpK+qQtJXwLsdYIvTCMKmo9zDG4L3HWotzjklPkaplbb6Bp2W7I9vgt5WTtG2rTTtt9HhOln8oHhkdU34AG1rWAPkfrr4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1e\"\n        title=\"\"\n        src=\"/static/fd84c65efe8fa28c0a88a6de73432f3a/5a190/8.1e.png\"\n        srcset=\"/static/fd84c65efe8fa28c0a88a6de73432f3a/772e8/8.1e.png 200w,\n/static/fd84c65efe8fa28c0a88a6de73432f3a/e17e5/8.1e.png 400w,\n/static/fd84c65efe8fa28c0a88a6de73432f3a/5a190/8.1e.png 800w,\n/static/fd84c65efe8fa28c0a88a6de73432f3a/c1b63/8.1e.png 1200w,\n/static/fd84c65efe8fa28c0a88a6de73432f3a/2b608/8.1e.png 1540w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>위의 그림에서는 /echo-hostname/alice/bob로 요청이 들어오면 /alice/bob로 전달되도록 설정되어 있다.</p>\n<p>(.*)은 /echo-hostname/ 다음에 오는 모든 문자열을 캡처하는 정규 표현식이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 800px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABPElEQVR42o2TiZKEIAxE/f9/9eJQR8FsXpAdZaZql6ouIJBOJ4FOmnGep2zbJt57GYZB5nmW1+slKSUJIYh3Tpxiniabsd9Hd9/s+25EXJzUAUB+pEOikkHOnRoYtONBmHM2wop1Xc12HIepg/yv0bUGFOAMSEd1GCH4z+i4SGQQQpRlWWxN2jGyXyX4EoCzGmyJy3dCLjnnzbk67fvxqwqgGrBGdZ2tli1h1EjjOCom6fteC+8kp2y1y2eWM58G9jTB7IqU8keHKU9HZIrP0ygpvlOu6bnrqdiz0WaF4E0EXa8dr2o7LqCsqBzNgbmNfnd8K7qez81gClEFSvRoCqvqslbozB77tq2lQdqsTfePlDlAOkSzpgUpqWPjDAJL/SrHPThlWB+EqhCicRgfKQ9DadJHil9+RvtjfgBjl6x9S9ZILwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"8.1f\"\n        title=\"\"\n        src=\"/static/6550a0fa49bd6fa4a0dcc13fdf636453/5a190/8.1f.png\"\n        srcset=\"/static/6550a0fa49bd6fa4a0dcc13fdf636453/772e8/8.1f.png 200w,\n/static/6550a0fa49bd6fa4a0dcc13fdf636453/e17e5/8.1f.png 400w,\n/static/6550a0fa49bd6fa4a0dcc13fdf636453/5a190/8.1f.png 800w,\n/static/6550a0fa49bd6fa4a0dcc13fdf636453/c1b63/8.1f.png 1200w,\n/static/6550a0fa49bd6fa4a0dcc13fdf636453/7db30/8.1f.png 1494w\"\n        sizes=\"(max-width: 800px) 100vw, 800px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>"}},"pageContext":{"slug":"/kubernetes/2024-2study/ingress_annotations/"}},"staticQueryHashes":[],"slicesMap":{}}